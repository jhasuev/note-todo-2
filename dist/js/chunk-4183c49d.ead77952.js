(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4183c49d"],{1071:function(t,e,n){"use strict";n.r(e);var o=n("7a23");Object(o["v"])("data-v-356081ed");var i={class:"edit"},c={class:"edit__todos"},r=["disabled"],s={class:"edit__actions"},a=["disabled"],u={class:"edit__actions"};function d(t,e,n,d,l,f){var h=Object(o["A"])("todo-item"),b=Object(o["A"])("card"),p=Object(o["A"])("confirm-popup");return Object(o["s"])(),Object(o["g"])(o["a"],null,[Object(o["i"])(b,{title:"Изменения заметки"},{default:Object(o["G"])((function(){return[Object(o["h"])("div",i,[Object(o["H"])(Object(o["h"])("input",{type:"text",class:"form-field",placeholder:"Название заметки","onUpdate:modelValue":e[0]||(e[0]=function(t){return l.note.title=t})},null,512),[[o["E"],l.note.title]]),Object(o["h"])("div",c,[Object(o["h"])("div",null,[(Object(o["s"])(!0),Object(o["g"])(o["a"],null,Object(o["y"])(l.note.todos,(function(t,e){return Object(o["s"])(),Object(o["e"])(h,{key:e,class:"edit__todos-item",done:t.done,title:t.title,onDone:function(t){return f.onDone(e,t)},onTitle:function(t){return f.onTodoTitleChange(e,t)},onRemove:function(t){return f.onTodoItemRemove(e)}},null,8,["done","title","onDone","onTitle","onRemove"])})),128))]),Object(o["h"])("button",{class:"btn btn--full edit__todos-add-btn",disabled:!f.canAddTodoItem,onClick:e[1]||(e[1]=function(){return f.onClickAddTodoItem&&f.onClickAddTodoItem.apply(f,arguments)})},"Добавить пункт",8,r)]),Object(o["h"])("div",s,[Object(o["h"])("button",{class:"btn btn--full btn--green  edit__actions-btn",disabled:!f.canSave,onClick:e[2]||(e[2]=function(){return f.save&&f.save.apply(f,arguments)})},"Сохранить",8,a),f.canRedo?(Object(o["s"])(),Object(o["g"])("button",{key:0,class:"btn btn--full btn--red  edit__actions-btn",onClick:e[3]||(e[3]=function(){return f.redo&&f.redo.apply(f,arguments)})},"Отменить внесенное изменение")):Object(o["f"])("",!0),f.canUndo?(Object(o["s"])(),Object(o["g"])("button",{key:1,onClick:e[4]||(e[4]=function(){return f.undo&&f.undo.apply(f,arguments)}),class:"btn btn--full edit__actions-btn"},"Повторить отмененное изменение")):Object(o["f"])("",!0)]),Object(o["h"])("div",u,[Object(o["h"])("button",{class:"btn btn--full  edit__actions-btn",onClick:e[5]||(e[5]=function(){return f.cancel&&f.cancel.apply(f,arguments)})},"Отменить редактирование"),Object(o["h"])("button",{class:"btn btn--full btn--red  edit__actions-btn",onClick:e[6]||(e[6]=function(){return f.remove&&f.remove.apply(f,arguments)})},"Удалить")])])]})),_:1}),Object(o["i"])(p,{ref:"confirm"},null,512)],64)}Object(o["t"])();var l=n("5530"),f=(n("a9e3"),n("4de4"),n("a434"),n("db49"));Object(o["v"])("data-v-09c3f9a2");var h={class:"todo"},b={class:"todo__checkbox"},p=["value"];function v(t,e,n,i,c,r){var s=Object(o["A"])("checkbox");return Object(o["s"])(),Object(o["g"])("div",h,[Object(o["h"])("div",b,[Object(o["i"])(s,{checked:n.done,onChange:r.onCheckboxChange},null,8,["checked","onChange"])]),Object(o["h"])("input",{type:"text",class:Object(o["o"])(["form-field  todo__field",{done:n.done}]),placeholder:"Название заметки",value:n.title,onInput:e[0]||(e[0]=Object(o["I"])((function(t){return r.onTitleChange(t.target.value)}),["stop"]))},null,42,p),Object(o["h"])("button",{class:"btn btn--red",title:"Удалить",onClick:e[1]||(e[1]=function(e){return t.$emit("remove")})},"×")])}Object(o["t"])();var m={name:"TodoItem",props:{title:{type:String,default:""},done:{type:Boolean,default:!1}},methods:{onCheckboxChange:function(t){this.$emit("done",t)},onTitleChange:function(t){this.$emit("title",t)}}};n("c6c9");m.render=v,m.__scopeId="data-v-09c3f9a2";var O=m,j=n("5dc0"),g=n("8285"),N=n("5502"),y={name:"Edit",components:{TodoItem:O,ConfirmPopup:j["a"]},props:{id:{type:[Number,String],required:!0}},data:function(){return{originNote:"",redidNote:"",note:void 0}},watch:{note:{handler:function(){this.redidNote&&this.canRedo&&(this.redidNote="")},deep:!0}},computed:Object(l["a"])(Object(l["a"])({},Object(N["c"])(["getNoteById","getNotes"])),{},{hasChanges:function(){return JSON.stringify(this.note)!==this.originNote},canSave:function(){return this.hasChanges&&g["a"].isValid("noteTitle",this.note.title).status},canRedo:function(){return this.hasChanges},canUndo:function(){return this.redidNote},canAddTodoItem:function(){var t,e=this.note.todos[this.note.todos.length-1];return!e||g["a"].isValid("todoTitle",null!==(t=null===e||void 0===e?void 0:e.title)&&void 0!==t?t:"").status}}),created:function(){this.init()},methods:Object(l["a"])(Object(l["a"])({},Object(N["b"])(["saveNote","removeNote"])),{},{init:function(){var t=this.getNoteById(Number(this.id));if(!t)return this.$router.push({name:"home"});this.note=JSON.parse(JSON.stringify(t)),this.originNote=JSON.stringify(this.note),this.redidNote=""},save:function(){this.canSave&&(this.note.todos=this.note.todos.filter((function(t){return g["a"].isValid("todoTitle",t.title).status})),this.saveNote(this.note),this.init())},onDone:function(t,e){this.note.todos[t].done=e},onTodoTitleChange:function(t,e){this.note.todos[t].title=e},onTodoItemRemove:function(t){this.note.todos.splice(t,1)},redo:function(){this.redidNote=JSON.stringify(this.note),this.note=JSON.parse(this.originNote)},undo:function(){this.note=JSON.parse(this.redidNote),this.redidNote=""},cancel:function(){var t=this;this.$refs.confirm.show({title:"Подтверждение",text:"Вы точно хотите отменить редактирование? Изменения будут потеряны.",yesBtn:"Да",noBtn:"Нет"}).then((function(){t.$router.push({name:"home"})}))},remove:function(){var t=this;this.$refs.confirm.show({title:"Подтверждение",text:"Вы точно хотите удалить эту заметку?",yesBtn:"Да",noBtn:"Нет"}).then((function(){t.removeNote(t.note.id),t.$router.push({name:"home"})}))},addTodoItem:function(){this.note.todos.push(JSON.parse(f["a"].todoItemTpl))},onClickAddTodoItem:function(){this.canAddTodoItem&&this.addTodoItem()}})};n("1a59");y.render=d,y.__scopeId="data-v-356081ed";e["default"]=y},"1a59":function(t,e,n){"use strict";n("473d")},"3f30":function(t,e,n){"use strict";n("eed8")},"473d":function(t,e,n){},"498a":function(t,e,n){"use strict";var o=n("23e7"),i=n("58a8").trim,c=n("c8d2");o({target:"String",proto:!0,forced:c("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var o=n("1d80"),i=n("577e"),c=n("5899"),r="["+c+"]",s=RegExp("^"+r+r+"*"),a=RegExp(r+r+"*$"),u=function(t){return function(e){var n=i(o(e));return 1&t&&(n=n.replace(s,"")),2&t&&(n=n.replace(a,"")),n}};t.exports={start:u(1),end:u(2),trim:u(3)}},"5dc0":function(t,e,n){"use strict";var o=n("7a23");Object(o["v"])("data-v-4346816d");var i={key:0,class:"text"},c={class:"btns"};function r(t,e,n,r,s,a){var u=Object(o["A"])("popup");return Object(o["s"])(),Object(o["e"])(u,{title:s.title,show:s.popup,"onUpdate:show":e[2]||(e[2]=function(t){return s.popup=t})},{default:Object(o["G"])((function(){return[s.text?(Object(o["s"])(),Object(o["g"])("div",i,Object(o["C"])(s.text),1)):Object(o["f"])("",!0),Object(o["h"])("div",c,[s.yesBtn?(Object(o["s"])(),Object(o["g"])("button",{key:0,onClick:e[0]||(e[0]=function(){return a.onYes&&a.onYes.apply(a,arguments)}),class:"btn btn--red btns__item"},Object(o["C"])(s.yesBtn),1)):Object(o["f"])("",!0),s.noBtn?(Object(o["s"])(),Object(o["g"])("button",{key:1,onClick:e[1]||(e[1]=function(){return a.onNo&&a.onNo.apply(a,arguments)}),class:"btn btn--green btns__item"},Object(o["C"])(s.noBtn),1)):Object(o["f"])("",!0)])]})),_:1},8,["title","show"])}Object(o["t"])();n("d3b7");var s={name:"ConfirmPopup",data:function(){return{title:"",text:"",yesBtn:"",noBtn:"",action:!1,popup:!1,resolve:void 0,reject:void 0}},methods:{init:function(t){this.title=t.title,this.text=t.text,this.yesBtn=t.yesBtn,this.noBtn=t.noBtn,this.action="",this.popup=!0},reset:function(){this.title="",this.text="",this.yesBtn="",this.noBtn="",this.action="",this.popup=!1},show:function(t){var e=this;return this.init(t),new Promise((function(t,n){e.resolve=t,e.reject=n}))},onYes:function(){this.reset(),this.resolve()},onNo:function(){this.reset(),this.reject()}}};n("3f30");s.render=r,s.__scopeId="data-v-4346816d";e["a"]=s},7156:function(t,e,n){var o=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var c,r;return i&&"function"==typeof(c=e.constructor)&&c!==n&&o(r=c.prototype)&&r!==n.prototype&&i(t,r),t}},8285:function(t,e,n){"use strict";n("498a");var o=n("db49");e["a"]={isValid:function(t,e){e=e.trim();var n=o["a"][t],i=[];return"boolean"==typeof n.required&&n.required&&!e&&i.push("Поле нужно заполнить"),"number"==typeof n.min&&e.length<n.min&&i.push("Поле должно содержать более ".concat(n.min," символов")),"number"==typeof n.max&&e.length>n.max&&i.push("Поле должно содержать менее ".concat(n.max," символов")),{errors:i,status:!i.length}}}},a434:function(t,e,n){"use strict";var o=n("23e7"),i=n("23cb"),c=n("a691"),r=n("50c4"),s=n("7b0b"),a=n("65f0"),u=n("8418"),d=n("1dde"),l=d("splice"),f=Math.max,h=Math.min,b=9007199254740991,p="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!l},{splice:function(t,e){var n,o,d,l,v,m,O=s(this),j=r(O.length),g=i(t,j),N=arguments.length;if(0===N?n=o=0:1===N?(n=0,o=j-g):(n=N-2,o=h(f(c(e),0),j-g)),j+n-o>b)throw TypeError(p);for(d=a(O,o),l=0;l<o;l++)v=g+l,v in O&&u(d,l,O[v]);if(d.length=o,n<o){for(l=g;l<j-o;l++)v=l+o,m=l+n,v in O?O[m]=O[v]:delete O[m];for(l=j;l>j-o+n;l--)delete O[l-1]}else if(n>o)for(l=j-o;l>g;l--)v=l+o-1,m=l+n-1,v in O?O[m]=O[v]:delete O[m];for(l=0;l<n;l++)O[l+g]=arguments[l+2];return O.length=j-o+n,d}})},a9e3:function(t,e,n){"use strict";var o=n("83ab"),i=n("da84"),c=n("94ca"),r=n("6eeb"),s=n("5135"),a=n("c6b6"),u=n("7156"),d=n("d9b5"),l=n("c04e"),f=n("d039"),h=n("7c73"),b=n("241c").f,p=n("06cf").f,v=n("9bf2").f,m=n("58a8").trim,O="Number",j=i[O],g=j.prototype,N=a(h(g))==O,y=function(t){if(d(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,o,i,c,r,s,a,u=l(t,"number");if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+u}for(c=u.slice(2),r=c.length,s=0;s<r;s++)if(a=c.charCodeAt(s),a<48||a>i)return NaN;return parseInt(c,o)}return+u};if(c(O,!j(" 0o1")||!j("0b1")||j("+0x1"))){for(var _,I=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof I&&(N?f((function(){g.valueOf.call(n)})):a(n)!=O)?u(new j(y(e)),n,I):y(e)},C=o?b(j):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;C.length>T;T++)s(j,_=C[T])&&!s(I,_)&&v(I,_,p(j,_));I.prototype=g,g.constructor=I,r(i,O,I)}},c604:function(t,e,n){},c6c9:function(t,e,n){"use strict";n("c604")},c8d2:function(t,e,n){var o=n("d039"),i=n("5899"),c="​᠎";t.exports=function(t){return o((function(){return!!i[t]()||c[t]()!=c||i[t].name!==t}))}},eed8:function(t,e,n){}}]);
//# sourceMappingURL=chunk-4183c49d.ead77952.js.map